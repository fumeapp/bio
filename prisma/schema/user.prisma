model User {
  id         BigInt      @id @default(autoincrement())
  email      String      @unique
  name       String?
  avatar     String?     @db.VarChar(1600)
  providers  Provider[]
  sessions   Token[]
  pens       Pen[]
  cartridges Cartridge[]
  shots      Shot[]
  payload    Json
  createdAt  DateTime    @default(now())
  updatedAt  DateTime    @updatedAt

  @@map("users")
}

model Provider {
  id        BigInt   @id @default(autoincrement())
  userId    BigInt
  user      User     @relation(fields: [userId], references: [id])
  name      String?
  avatar    String?  @db.VarChar(1600)
  payload   Json
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt

  @@unique([userId, name])
  @@map("providers")
}

model Token {
  id         BigInt   @id @default(autoincrement())
  userId     BigInt
  user       User     @relation(fields: [userId], references: [id])
  hash       String   @unique
  source     String
  ip         String
  agent      String
  location   Json
  // coordinate Unsupported("Point")
  coordinate String   @default("30.2423 -97.7672")
  createdAt  DateTime @default(now())
  updatedAt  DateTime @updatedAt

  @@map("tokens")
}
